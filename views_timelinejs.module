<?php
/**
 * @file
 * Views TimelineJS API, theming, libraries, etc.
 */

/**
 * Implements hook_views_api().
 */
function views_timelinejs_views_api() {
  return array(
    'api' => '3',
    'path' => drupal_get_path('module', 'views_timelinejs'),
  );
}

/**
 * Implements hook_theme().
 */
function views_timelinejs_theme() {
  $base = array('file' => 'theme/views_timelinejs.theme.inc');
  return array(
    'views_timelinejs_nodata' => $base + array(),
    'views_timelinejs_link_to_entity' => $base + array(
      'arguments' => array(
        'uri' => NULL,
        'link_text' => NULL,
      ),
    ),
  );
}

/**
 * Implements hook_library().
 */
function views_timelinejs_library() {
  $libraries = array();

  $libraries['timelinejs_cdn'] = array(
    'title' => 'TimelineJS CDN',
    'website' => 'https://timeline.knightlab.com',
    'version' => '3.3.15',
    'js' => array(
      'timeline.js' => array(
        'data' => 'https://cdn.knightlab.com/libs/timeline3/latest/js/timeline.js',
        'type' => 'external',
        'group' => JS_LIBRARY,
      ),
    ),
    'css' => array(
      'timeline.css' => array(
        'data' => 'https://cdn.knightlab.com/libs/timeline3/latest/css/timeline.css',
        'type' => 'external',
        'group' => CSS_DEFAULT,
      ),
    ),
  );

  return $libraries;
}

/**
 * Implements hook_libraries_info().
 */
function views_timelinejs_libraries_info() {
  $libraries = array();

  $libraries['timeline'] = array(
    'name' => 'timeline',
    'vendor url' => 'http://timeline.verite.co',
    'download url' => 'http://timeline.verite.co',
    'version arguments' => array(
      'file' => 'compiled/js/timeline.js',
      'pattern' => '/TimelineJS - ver. ([\d.]+)/i',
      'lines' => 5,
    ),
    'files' => array(
      'js' => array(
        'compiled/js/timeline.js',
      ),
      'css' => array(
        'compiled/css/timeline.css',
      ),
    ),
  );

  return $libraries;
}
